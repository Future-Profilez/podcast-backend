generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id       Int    @id @default(autoincrement())
  name     String
  email    String @unique
  password String
}

model Podcast {
  id          Int       @id @default(autoincrement())
  uuid        String    @unique
  thumbnail   String
  name        String    @unique
  email       String
  description String
  createdAt   DateTime  @default(now())
  author      String    @default("The Property Portfolio Podcast")
  cast        String[]
  isDeleted   Boolean   @default(false)
  language    String[]
  episodes    Episode[]
}

model Episode {
  id                 Int                  @id @default(autoincrement())
  uuid               String               @unique
  title              String
  description        String
  duration           Int
  durationInSec      Int
  link               String?
  thumbnail          String
  mimefield          String
  size               Int?
  createdAt          DateTime             @default(now())
  podcastId          Int
  isDeleted          Boolean              @default(false)
  detail             String?
  spotifyLink        String?
  appleLink          String?
  timestamps         String?
  episodeNumber      Int?
  season             Int?
  topic              String? @default("Financing")
  audio              String?
  audioStatus        String @default("PENDING")
  DistributionStatus DistributionStatus[]
  podcast            Podcast              @relation(fields: [podcastId], references: [id])
}

model Guide {
  id          Int      @id @default(autoincrement())
  uuid        String   @unique
  title       String
  description String
  author      String   @default("The Property Portfolio Podcast")
  link        String
  language    String[]
  thumbnail   String
  isDeleted   Boolean  @default(false)
  downloads   Int      @default(0)
  pages       Int?
}

model subscriber {
  id    Int    @id @default(autoincrement())
  email String @unique
  createdAt DateTime @default(now())
}

model contact {
  id      Int     @id @default(autoincrement())
  email   String  @unique
  name    String
  message String
  subject String?
  createdAt DateTime @default(now())
}

model DistributionStatus {
  id                 Int       @id @default(autoincrement())
  episodeId          Int
  spotifyStatus      String    @default("pending")
  appleStatus        String    @default("pending")
  spotifyEpisodeId   String?
  spotifyEpisodeLink String?
  appleEpisodeId     String?
  appleEpisodeLink   String?
  errorLogs          String?
  retryCount         Int       @default(0)
  lastAttemptAt      DateTime?
  createdAt          DateTime  @default(now())
  updatedAt          DateTime
  Episode            Episode   @relation(fields: [episodeId], references: [id])
}
